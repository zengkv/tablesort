/*!
 * tablesort v4.1.0 (2016-12-29)
 * http://zengkv.com/tablesort/demo/
 * Copyright (c) 2016 ; Licensed MIT
*/!function(){function t(e,r){if(!(this instanceof t))return new t(e,r);if(!e||"TABLE"!==e.tagName)throw Error("Element must be a table");this.init(e,r||{})}var e=[],r=function(t){var e;return window.CustomEvent&&"function"==typeof window.CustomEvent?e=new CustomEvent(t):(e=document.createEvent("CustomEvent"),e.initCustomEvent(t,!1,!1,void 0)),e},o=function(t){return t.getAttribute("data-sort")||t.textContent||t.innerText||""},n=function(t,e){return t=t.toLowerCase(),e=e.toLowerCase(),t===e?0:e>t?1:-1},s=function(t,e){return function(r,o){var n=t(r.td,o.td);return 0===n?e?o.index-r.index:r.index-o.index:n}};t.extend=function(t,r,o){if("function"!=typeof r||"function"!=typeof o)throw Error("Pattern and sort must be a function");e.push({name:t,pattern:r,sort:o})},t.prototype={init:function(t,e){var r,o,n,s,i=this;if(i.table=t,i.thead=!1,i.options=e,t.rows&&t.rows.length>0)if(t.tHead&&t.tHead.rows.length>0){for(n=0;n<t.tHead.rows.length;n++)if("thead"===t.tHead.rows[n].getAttribute("data-sort-method")){r=t.tHead.rows[n];break}r||(r=t.tHead.rows[t.tHead.rows.length-1]),i.thead=!0}else r=t.rows[0];if(r){var a=function(){i.current&&i.current!==this&&i.current.removeAttribute("aria-sort"),i.current=this,i.sortTable(this)};for(n=0;n<r.cells.length;n++)s=r.cells[n],s.setAttribute("role","columnheader"),"none"!==s.getAttribute("data-sort-method")&&"true"!==s.getAttribute("data-sort-static")&&(s.tabindex=0,s.addEventListener("click",a,!1),null!==s.getAttribute("data-sort-default")&&(o=s));o&&(i.current=o,i.sortTable(o))}},sortTable:function(t,i){var a=this,d=t.cellIndex,l=n,u="",c=[],f=a.thead?0:1,h=t.getAttribute("data-sort-method"),b=t.getAttribute("aria-sort"),g={};if(a.table.dispatchEvent(r("beforeSort")),i||(b="ascending"===b?"descending":"descending"===b?"ascending":a.options.descending?"ascending":"descending",t.setAttribute("aria-sort",b)),!(a.table.rows.length<2)){if(!h){for(;c.length<3&&f<a.table.tBodies[0].rows.length;)u=o(a.table.tBodies[0].rows[f].cells[d]),u=u.trim(),u.length>0&&c.push(u),f++;if(!c)return}for(f=0;f<e.length;f++)if(u=e[f],h){if(u.name===h){l=u.sort;break}}else if(c.every(u.pattern)){l=u.sort;break}for(f=0;f<t.parentNode.cells.length;f++)u=t.parentNode.cells[f],"true"==u.getAttribute("data-sort-static")&&f!=d&&(g[f]=[]);for(a.col=d,f=0;f<a.table.tBodies.length;f++){var w,m,p=[],v={},A=0,B=0;if(!(a.table.tBodies[f].rows.length<2)){for(w=0;w<a.table.tBodies[f].rows.length;w++){u=a.table.tBodies[f].rows[w],"none"===u.getAttribute("data-sort-method")?v[A]=u:p.push({tr:u,td:o(u.cells[a.col]),index:A});for(m in g)g[m][A]=u.cells[m];A++}for("descending"===b?(p.sort(s(l,!0)),p.reverse()):p.sort(s(l,!1)),w=0;A>w;w++)v[w]?(u=v[w],B++):u=p[w-B].tr,a.table.tBodies[f].appendChild(u);for(m in g){for(m=parseInt(m),w=0;A>w;w++)u=a.table.tBodies[f].rows[w].cells[m],a.table.tBodies[f].rows[w].removeChild(u);for(w=0;A>w;w++)u=a.table.tBodies[f].rows[w].cells[m],a.table.tBodies[f].rows[w].insertBefore(g[m][w],u)}}}a.table.dispatchEvent(r("afterSort"))}},refresh:function(){void 0!==this.current&&this.sortTable(this.current,!0)}},"undefined"!=typeof module&&module.exports?module.exports=t:window.Tablesort=t}();